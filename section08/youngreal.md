# 액츄에이터

### 프로덕션 준비기능이란?

- 애플리케이션의 생존유무, 로그정보, 커넥션풀 사용현황등을 확인할수있다.

- 스프링 부트의 액추에이터가 이런 기능을편리하게 사용할수있도록 액추에이터라는걸 제공하고있다. 

### 액츄에이터

- 스프링에 등록되어있는 빈의 정보들, 애플리케이션에서 동작중인 스레드의 상태들 등 수많은 정보를 알수있다.

### 엔드포인트 설정

엔드포인트 사용을위해 엔드포인트 활성화, 엔드포인트 노출 2가지 과정이 필요하다.

```java
// 활성화
management:
  endpoint:
    shutdown:
      enabled: true
// 노출      
  endpoints:
    web:
      exposure:
        include: "*"
```


### 다양한 엔드포인트
/actuator/beans : 등록되어있는 bean의 정보를 볼수있는 엔드포인트   

/actuator/conditions : condition 조건이 유효했는지 아닌지 확인할수있는 엔드포인트

그외 환경변수, 스레드덤프, 로거 설정 등을 볼수있는 엔드포인트들이 존재한다. 


### 헬스정보

문제 발생시 빠르게 응답할수있게 된다.DB헬스체크, 디스크 사용 현황에 대해 확인할수있다. 

### 애플리케이션 정보

자바런타임, OS, 빌드정보, git정보등을 체크할수있다.

```java
management:
  info:
    java:
      enabled: true
    os:
      enabled: true
```
애플리케이션의 기본정보를 노출한다

### 로거 
/actuator/loggers

- 로깅 레벨을 실시간으로 변경할수있고 확인할수있다.

- POST 요청방식으로 원하는 로깅레벨을 JSON타입으로 실어주면 로깅 레벨을 변경할수있다.

### HTTP 요청응답기록

개발단계에서만 사용하고 실 운영에서는 더 좋은 다른기술을 사용하는것이 좋다.

### 액츄에이터와 보안

- 액츄에이터 엔드포인트들은 내부에서만 접근가능하게끔 내부망을 사용하는것이 안전하다.
  - 톰캣은 8080포트로, 액츄에이터는 9292포트로 등록하는방법
  - 포트분리가 힘든경우 /actuator url에 대해 필터,인터셉터, 스프링시큐리티 등으로 추가 개발이 필요하다
